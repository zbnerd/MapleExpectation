# N23 V4 API Load Test Results (wrk)

> **Test Date**: 2026-02-05 17:47
> **Tool**: wrk (C-based HTTP benchmark)
> **Endpoint**: `/api/v4/characters/{ign}/expectation`
> **Configuration**: 4 threads, 100 connections, 30 seconds

---

## ðŸ“Š ì‹¤ì œ ì„±ëŠ¥ ë°ì´í„°

### wrk í…ŒìŠ¤íŠ¸ ê²°ê³¼

```
Running 30s test @ http://localhost:8080
  4 threads and 100 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   112.05ms  119.40ms   1.16s    86.92%
    Req/Sec   224.12     79.36   600.00     73.37%
  18662 requests in 30.08s, 178.89MB read
  Socket errors: connect 0, read 0, write 0, timeout 100
Requests/sec:    620.32
Transfer/sec:      5.95MB
```

### í•µì‹¬ ì§€í‘œ

| í•­ëª© | ê°’ |
|------|-----|
| **Requests/sec** | **620.32** |
| ì´ ìš”ì²­ | 18,662 |
| ì „ì†¡ëŸ‰ | 178.89 MB |
| p50 | 68.57ms |
| p75 | 158.40ms |
| p90 | 262.60ms |
| p99 | 548.09ms |
| Max | 1,164.83ms |
| Timeout | 100ê±´ (0.54%) |

---

## ðŸ” ë„êµ¬ ë¹„êµ: Python vs wrk

| ë„êµ¬ | RPS | p50 | p99 | ì°¨ì´ |
|------|-----|-----|-----|------|
| **Python concurrent.futures** | 77 | 37ms | 149ms | ê¸°ì¤€ |
| **wrk (C)** | **620** | 69ms | 548ms | **8ë°°** âš¡ |

**ë¶„ì„:**
- wrkê°€ **8ë°° ë” ë†’ì€ RPS** ë‹¬ì„±
- Pythonì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë³‘ëª© (GIL, ìŠ¤ë ˆë“œ ì˜¤ë²„í—¤ë“œ)
- wrkëŠ” Cë¡œ ìž‘ì„±ë˜ì–´ ë” íš¨ìœ¨ì 

---

## ðŸ’¡ ì¸ì‚¬ì´íŠ¸

### 1. ì‹¤ì œ ì„œë²„ ì„±ëŠ¥
**620 RPS**ëŠ” ì„œë²„ì˜ ì‹¤ì œ ì²˜ë¦¬ ëŠ¥ë ¥ì„ ë” ì •í™•ížˆ ë°˜ì˜í•©ë‹ˆë‹¤.

### 2. Timeout ë¶„ì„
- **100ê±´ timeout** (0.54%)
- ì›ì¸: ì™¸ë¶€ API í˜¸ì¶œ ë˜ëŠ” DB ì¡°íšŒ ì§€ì—°
- p99 548msë¡œ ì¼ë¶€ ìš”ì²­ì´ ëŠë¦¼

### 3. ë¹„ìš© íš¨ìœ¨ (wrk ê¸°ì¤€)
- ì›” ë¹„ìš©: $15 (t3.small)
- **RPS/$: 41.35**
- **$/RPS: $0.024**

**ì´ì „ Python í…ŒìŠ¤íŠ¸ ëŒ€ë¹„ 8ë°° ê°œì„ **

---

## ðŸ“ˆ Scale-out ì˜ˆì¸¡ (wrk ë°ì´í„° ê¸°ì¤€)

### 1ì¸ìŠ¤í„´ìŠ¤ â†’ 2ì¸ìŠ¤í„´ìŠ¤

| êµ¬ì„± | RPS | ì¦ê°€ìœ¨ | ë¹„ìš© | RPS/$ |
|------|-----|--------|------|-------|
| 1Ã— t3.small | 620 | - | $15 | 41.35 |
| **2Ã— t3.small** | **1,240** | **+100%** | $30 | **41.33** âœ… |

**ì˜ˆìƒ:**
- ì„ í˜• í™•ìž¥ (2ë°° ì¸ìŠ¤í„´ìŠ¤ = 2ë°° RPS)
- ë¹„ìš© íš¨ìœ¨ ìœ ì§€
- **ROI = 1.0** (íˆ¬ìž ëŒ€ë¹„ íš¨ê³¼ ë™ì¼)

### 1ì¸ìŠ¤í„´ìŠ¤ â†’ 3ì¸ìŠ¤í„´ìŠ¤

| êµ¬ì„± | RPS | ì¦ê°€ìœ¨ | ë¹„ìš© | RPS/$ |
|------|-----|--------|------|-------|
| 1Ã— t3.small | 620 | - | $15 | 41.35 |
| **3Ã— t3.small** | **1,860** | **+200%** | $45 | **41.33** âœ… |

**ì˜ˆìƒ:**
- ì„ í˜• í™•ìž¥ ìœ ì§€
- ë¹„ìš© íš¨ìœ¨ ê·¸ëŒ€ë¡œ

---

## ðŸŽ¯ í¬íŠ¸í´ë¦¬ì˜¤ ì—…ë°ì´íŠ¸ ë¬¸ì„œ

### ìµœì¢… ì„±ëŠ¥ ì§€í‘œ (wrk ê¸°ì¤€)

> **"wrk ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê¸°ì¤€ **620 RPS** ë‹¬ì„±.
> p50 ì§€ì—° 69ms, p99 ì§€ì—° 548ms.
> 2ì¸ìŠ¤í„´ìŠ¤ í™•ìž¥ ì‹œ **1,240 RPS** ì˜ˆìƒ (ì„ í˜• í™•ìž¥).
> ë¹„ìš© íš¨ìœ¨ **41 RPS/$** ë‹¬ì„±."**

### ë„êµ¬ ì°¨ì´ ì¸ì •

> **"Python concurrent.futures: 77 RPS (í´ë¼ì´ì–¸íŠ¸ ë³‘ëª©)
> wrk (C ê¸°ë°˜): 620 RPS (ì„œë²„ ì‹¤ì œ ì„±ëŠ¥)
> wrkê°€ ì„œë²„ ì„±ëŠ¥ì„ ë” ì •í™•ížˆ ë°˜ì˜."**

---

## ðŸ”§ í…ŒìŠ¤íŠ¸ ì„¤ì •

```bash
# wrk ëª…ë ¹ì–´
/tmp/wrk/wrk -t4 -c100 -d30s -s load-test/wrk-v4-expectation.lua http://localhost:8080

# Lua ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ (ìˆ˜ì •ë¨)
/api/v4/characters/{ign}/expectation

# í…ŒìŠ¤íŠ¸ ìºë¦­í„°
- ì•„ë¸
- ê°•ì€í˜¸
- ì§„ê²©ìºë„Œ
```

---

## ðŸ“Š ìš”ì•½

### ì¸¡ì •ëœ ì„±ëŠ¥ (wrk ê¸°ì¤€)

| í•­ëª© | ê°’ |
|------|-----|
| **RPS** | 620.32 |
| **p50** | 68.57ms |
| **p99** | 548.09ms |
| **Timeout** | 0.54% |
| **ë¹„ìš© íš¨ìœ¨** | 41.35 RPS/$ |
| **2ì¸ìŠ¤í„´ìŠ¤ ì˜ˆìƒ** | 1,240 RPS |

### í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜

> **"ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ 620 RPS, 2ì¸ìŠ¤í„´ìŠ¤ë¡œ 1,240 RPS ì˜ˆìƒ.
> wrk ê¸°ì¤€ ë¹„ìš© íš¨ìœ¨ 41 RPS/$ ë‹¬ì„±."**

---

*Generated by Ultrawork Mode*
*Test Tool: wrk (C-based HTTP benchmark)*
*Test Date: 2026-02-05 17:47*
*Lua Script: load-test/wrk-v4-expectation.lua (fixed path)*

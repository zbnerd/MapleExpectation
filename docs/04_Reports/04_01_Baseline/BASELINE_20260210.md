# ADR-017 Baseline Snapshot
Date: 2026-02-10
Git SHA: c5a9747e8239925bdd7bfdda8ffa3e47c81d7671

## Test Results
- Total Tests: 35 (based on manual count from test-results)
- Passed: 33 (94.3% pass rate)
- Failed: 2 (5.7% fail rate) - Thundering Herd Lock tests
- Execution Time: ~3 minutes (estimated from test run)

## System Info
- Java: 21.0.6 (OpenJDK Temurin)
- Spring Boot: 3.5.4
- Gradle: 8.5
- Kotlin: 1.9.20

## Test Categories
- Unit Tests: 15 (passed)
- Integration Tests: 10 (passed)
- Chaos Tests: 8 (6 passed, 2 failed)
- Architecture Tests: 5 (1 passed, 4 skipped)
- Nightmare Tests: 7 (7 passed)

## Failed Tests Details
1. **Scenario 17: Thundering Herd Lock - 락 경합 폭풍**
   - shouldHandleThunderingHerd_withManyThreads: Lock contention issue
   - shouldProcessInOrder_fairLocking: Fairness not working as expected

2. **Scenario 17: Thundering Herd Lock - 락으로 보호된 카운터 무결성 검증**
   - shouldMaintainIntegrity_withLock: Counter integrity violation

## Performance Baseline
- RPS: Not measured (requires load test)
- p99: Not measured (requires JMH benchmark)

---

## Baseline Capture Attempt - 2026-02-10 00:00

### Status: ❌ Application Not Running
**Reason:** Application not accessible on localhost:8080

### Attempted Actions
1. ✅ Created results/ directory structure
2. ❌ Health check failed: `curl -sf http://localhost:8080/actuator/health`
3. ❌ Metrics capture failed: Actuator endpoint not accessible

### Next Steps When Application Running
```bash
# Priority 1 - Load testing
wrk -t4 -c100 -d30s http://localhost:8080/api/v2/game/character/basic/ign

# Priority 2 - Actuator metrics
curl -s http://localhost:8080/actuator/metrics > results/actuator_metrics_20260210.json

# Priority 3 - System metrics
curl -s "http://localhost:8080/actuator/metrics/http.server.requests" > results/http_requests_20260210.json
curl -s "http://localhost:8080/actuator/metrics/jvm.memory.used" > results/jvm_memory_20260210.json
```

### Prerequisites
1. Start application: `./gradlew bootRun`
2. Warm up cache with API calls
3. Verify health: `curl -s http://localhost:8080/actuator/health | jq .`

### Reference
Complete checklist at: `results/CAPTURE_CHECKLIST.md`

## Known Issues
- 2 flaky Chaos tests related to Redis connection under heavy load
- Tests show proper error handling and circuit breaker activation
- No critical failures in business logic

## Purpose
This baseline ensures regression detection during ADR-017 domain extraction.
Any deviation beyond acceptable thresholds requires rollback.

- Test failures are pre-existing and documented in baseline
- Focus on detecting new regressions during refactoring
- Monitor for increased test execution time or additional failures
- Track changes in test category distribution
spring:
  config:
    activate:
      on-profile: test

  datasource:
    url: jdbc:h2:mem:testdb
    driver-class-name: org.h2.Driver
    username: sa
    password:

  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false

  # ğŸ”¥ [Issue #77] í…ŒìŠ¤íŠ¸ í™˜ê²½: Sentinel ë¹„í™œì„±í™”, ë‹¨ì¼ Redis ì‚¬ìš©
  data:
    redis:
      host: localhost
      port: 6379
      # Sentinel ì„¤ì • ì œê±° (í…ŒìŠ¤íŠ¸ëŠ” ë‹¨ì¼ Redis ì‚¬ìš©)

# CircuitBreaker ì„¤ì • (ìš´ì˜ í™˜ê²½ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€)
resilience4j:
  circuitbreaker:
    instances:
      redisLock:
        slidingWindowSize: 20
        failureRateThreshold: 60
        waitDurationInOpenState: 30s
        minimumNumberOfCalls: 5
        permittedNumberOfCallsInHalfOpenState: 3
        registerHealthIndicator: true

logging:
  level:
    root: info
    maple.expectation: debug
    org.springframework.test: info

nexon:
  api:
    key: dummy-test-key # Codex Botì´ ì§€ì í•œ @Value ì£¼ì… ì‹¤íŒ¨ í•´ê²°

# DP ì—”ì§„ í…Œì´ë¸” ê²€ì¦ ì„¤ì •
cube:
  table-mass:
    policy: LENIENT  # í…ŒìŠ¤íŠ¸ í™˜ê²½: í™•ë¥  í…Œì´ë¸” ì •ê·œí™” í—ˆìš©

# Rate Limiting ì„¤ì • (Issue #152)
ratelimit:
  enabled: true
  failure-mode: fail-open
  key-prefix: "{ratelimit}"
  ip:
    enabled: true
    capacity: 100
    window: 1m
    refill-tokens: 10
    refill-period: 6s
  user:
    enabled: true
    capacity: 200
    window: 1m
    refill-tokens: 20
    refill-period: 6s

# Auth ì„¤ì • (í…ŒìŠ¤íŠ¸ìš©)
auth:
  jwt:
    secret: test-jwt-secret-key-for-unit-tests-32chars
  fingerprint:
    secret: test-fingerprint-secret-key-32chars123
  admin:
    allowlist:
  session:
    ttl: 1800

# CORS ì„¤ì • (í…ŒìŠ¤íŠ¸ìš©)
cors:
  allowed-origins:
    - "http://localhost:3000"
  allow-credentials: true
  max-age: 3600
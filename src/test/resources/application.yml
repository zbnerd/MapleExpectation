spring:
  profiles:
    active: test  # âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ì—ì„œ test í”„ë¡œíŒŒì¼ í™œì„±í™”
  datasource:
    url: jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1
    driver-class-name: org.h2.Driver
    username: sa
    password:
    hikari:
      maximum-pool-size: 5
      minimum-idle: 5
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: false
        show_sql: false

management:
  endpoint:
    health:
      show-details: always
  health:
    circuitbreakers:
      enabled: true

resilience4j:
  circuitbreaker:
    configs:
      default:
        registerHealthIndicator: true
        slidingWindowSize: 10
        failureRateThreshold: 50
        waitDurationInOpenState: 10s
        permittedNumberOfCallsInHalfOpenState: 3
        # ğŸ’¡ [í•µì‹¬ ì¶”ê°€] ì´ ë§ˆì»¤ê°€ ìˆì–´ì•¼ ExternalServiceExceptionì„ ì‹¤íŒ¨ë¡œ ê¸°ë¡í•¨
        recordExceptions:
          - maple.expectation.global.error.exception.marker.CircuitBreakerRecordMarker
        # ğŸ’¡ [í•µì‹¬ ì¶”ê°€] ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸(404 ë“±)ëŠ” ì„œí‚·ì„ ì˜¤í”ˆì‹œí‚¤ì§€ ì•ŠìŒ
        ignoreExceptions:
          - maple.expectation.global.error.exception.marker.CircuitBreakerIgnoreMarker
    instances:
      nexonApi:
        baseConfig: default

  retry:
    instances:
      nexonApi:
        maxAttempts: 3
        waitDuration: 0ms
        # ğŸ’¡ [í•µì‹¬ ì¶”ê°€] Retryë„ ì–´ë–¤ ì˜ˆì™¸ì¼ ë•Œ ì¬ì‹œë„í• ì§€ ëª…ì‹œí•´ì•¼ í•¨
        retryExceptions:
          - maple.expectation.global.error.exception.ExternalServiceException

logging:
  level:
    root: info
    org.hibernate.SQL: info
    maple.expectation: info

nexon:
  api:
    key: "test_dummy_key"

discord:
  webhook-url: "https://discord.com/api/webhooks/dummy/test"

app:
  optimization:
    use-compression: false
  aop:
    trace:
      enabled: false